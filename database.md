Отчет (Задание 1.СУБД)

Цель и выбор СУБД
Цель разработки базы данных – создать устойчивую к ошибкам и расширяемую модель данных для подсистемы работы с продукцией мебельной компании, обеспечивающую хранение информации о продукции, цехах и технологическом времени производства, а также подготовку к дальнейшему развитию системы.

В качестве СУБД использована облачная база данных PostgreSQL, развернутая на платформе Render. Выбор облачного PostgreSQL обусловлен следующими преимуществами:

высокая доступность и отказоустойчивость без необходимости администрирования серверов;

автоматическое масштабирование и резервное копирование;

предоставление готового URL-подключения для интеграции с приложением;

соответствие требованиям production-окружения для демонстрации работоспособности системы.

Проектирование структуры БД
Анализ предметной области
На основе описания задания выделены основные сущности: «Продукция», «Цех», «Время работы цеха над продукцией», а также вспомогательные сущности для коэффициентов типа продукции и потерь сырья. Эти сущности покрывают минимально необходимый функционал подсистемы: список продукции, список цехов и расчет времени изготовления.

Разработка логической и физической модели
Были спроектированы следующие таблицы:

Product – хранит сведения о продукции (тип продукта, наименование, артикул, основной материал, минимальная стоимость для партнера).

Department – хранит сведения о производственных цехах (наименование цеха, тип цеха).

DepartmentWorkTime – связывает продукцию и цехи, содержит длительность производства продукции в конкретном цехе.

ProductCoefficient – хранит коэффициент типа продукции для расчета сырья.

LoseCoefficient – хранит коэффициент потерь сырья для различных материалов.

Нормализация и 3НФ
Структура таблиц приведена к третьей нормальной форме:

каждое поле атомарно и описывает одно свойство сущности;

повторяющиеся группы вынесены в отдельные таблицы (например, многозначная связь между продукцией и цехами реализована через DepartmentWorkTime);

зависимости между полями находятся в рамках одной сущности, транзитивные зависимости удалены.

Обеспечение ссылочной целостности
Для всех связей заданы первичные и внешние ключи:

DepartmentWorkTime.product_id ссылается на Product.id;

DepartmentWorkTime.department_id ссылается на Department.id;

при необходимости внешние ключи определены и для таблиц коэффициентов.
PostgreSQL на платформе Render гарантирует соблюдение ограничений целостности на уровне СУБД.

Инициализация и наполнение данных
Развертывание базы данных
База данных PostgreSQL была создана и развернута на платформе Render. После создания автоматически сгенерирован connection string в формате postgresql://user:password@host:port/database, который сохранен в файле .env проекта для безопасного подключения.

Создание схемы
Структура базы данных создана с использованием ORM SQLAlchemy (Base.metadata.create_all()) и SQL-скриптов DDL. Для воспроизводимости работы сформирован полный скрипт базы данных (schema.sql), содержащий определения всех таблиц, первичных и внешних ключей, индексов и ограничений.

Импорт исходных данных
Заказчиком предоставленные файлы *_import.xlsx были подготовлены к импорту (приведение типов данных, очистка, сопоставление столбцов с полями таблиц) и загружены в облачную базу PostgreSQL на Render. Для обеспечения воспроизводимости создан отдельный SQL-скрипт вставки данных (data.sql), который может быть выполнен для восстановления тестового набора данных.

ER-диаграмма
Схема базы данных визуализирована средствами веб-интерфейса Render. Полученная ER-диаграмма, содержащая все таблицы, связи между ними, атрибуты и ключи, экспортирована в формат PDF в соответствии с требованиями задания.

Интеграция с приложением
Connection string облачной базы PostgreSQL интегрирован в приложение через переменную окружения URL в файле .env. SQLAlchemy обеспечивает пул соединений с настройками pool_pre_ping=True для проверки доступности соединений к облачной базе, что гарантирует стабильную работу приложения при сетевых задержках.
